<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Date Input Example</title>
</head>
<body>

    <div class="line">
        <input type="date" id="AllowedDates" name="questionLabel">
    </div>
    <div class="line">
        <input type="date" id="AllowedDates1" name="questionLabel">
    </div>
    <div class="line">
        <input type="date" id="AllowedDates2" name="questionLabel">
    </div>

    <input type="button" id="addDateButton" value="+" >

    <iframe id="view" style="width: 100%; height: 500px;"></iframe>

    <script>
        class ParameterFrame {
            constructor() {
                this.iframe = document.querySelector("#view");
                this.dateFields = ['AllowedDates', 'AllowedDates1', 'AllowedDates2'];
                
                this.params = {
                    URL: "https://example.com" // Change to your actual URL
                };

                // Bind updateFrame to retain 'this' reference
                this.updateFrame = this.updateFrame.bind(this);

                // Attach event listeners
                this.dateFields.forEach((field) => {
                    document.getElementById(field).addEventListener('change', this.updateFrame);
                });

                // Update iframe initially
                this.updateFrame();
            }

            updateFrame() {
                let url = new URL(this.params.URL);
                let params = url.searchParams;

                // Get values from input fields and add to URL
                this.dateFields.forEach((field) => {
                    const dateValue = document.getElementById(field).value;
                    if (dateValue) {
                        params.set(field, dateValue);
                    }
                });

                // Set the iframe src
                this.iframe.setAttribute("src", url.toString());
            }
        }

        // Run after the page loads
        document.addEventListener("DOMContentLoaded", function () {
            new ParameterFrame();
        });
    </script>

</body>
</html>
