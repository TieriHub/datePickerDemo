  <style>
    label {
      display: block;
      margin: 10px 0 5px;
    }
    input[type="text"], input[type="date"] {
      width: calc(100% - 22px);
      padding: 8px;
      margin-bottom: 10px;
      box-sizing: border-box;
    }
    button {
      padding: 10px 20px;
      background-color: #4CAF50;
      color: white;
      border: none;
      cursor: pointer;
    }
    button:hover {
      background-color: #45a049;
    }
    .date-field {
      display: flex;
      align-items: center;
    }
    .date-field button {
      margin-left: 10px;
      background-color: #f44336;
    }
    .date-field button:hover {
      background-color: #e53935;
    }
  </style>
<body>
  <form id="settings-form">
    <div>

      <label for="questionLabel">Question Label:</label>
      <input type="Date" id="AllowedDates" name="questionLabel" placeholder="Enter the question label">
  
      <label for="allowedDates">Allowed Dates:</label>
      <div id="allowedDatesContainer"></div>
      <button type="button" id="addDateButton">Add Date</button>
    </div>
  </form>

  <script>
    document.getElementById('addDateButton').addEventListener('click', function() {
      const container = document.getElementById('allowedDatesContainer');
      const dateField = document.createElement('div');
      dateField.className = 'date-field';
      dateField.innerHTML = `
        <input type="date" name="allowedDates">
        <button type="button" onclick="removeDateField(this)">Remove</button>
      `;
      container.appendChild(dateField);
    });

    function removeDateField(button) {
      button.parentElement.remove();
    }

    document.getElementById('settings-form').addEventListener('submit', function(event) {
      event.preventDefault();

      const questionLabel = document.getElementById('questionLabel').value;
      const allowedDates = Array.from(document.getElementsByName('allowedDates')).map(input => input.value);

      // Emit settings to JotForm
      const settings = {
        QuestionLabel: questionLabel,
        AllowedDates: allowedDates.join(',')
      };
      JFCustomWidget.sendMessage(settings);

      alert('Settings saved successfully!');
    });

    // Load settings from JotForm
    JFCustomWidget.subscribe('ready', function() {
      const questionLabel = JFCustomWidget.getWidgetSetting('QuestionLabel');
      const allowedDates = JFCustomWidget.getWidgetSetting('AllowedDates');

      if (questionLabel) {
        document.getElementById('questionLabel').value = questionLabel;
      }
      if (allowedDates) {
        allowedDates.split(',').forEach(date => {
          const container = document.getElementById('allowedDatesContainer');
          const dateField = document.createElement('div');
          dateField.className = 'date-field';
          dateField.innerHTML = `
            <input type="date" name="allowedDates" value="${date}">
            <button type="button" onclick="removeDateField(this)">Remove</button>
          `;
          container.appendChild(dateField);
        });
      }
    });
  </script>


  
</body>
  