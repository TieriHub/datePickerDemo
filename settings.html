
<body style="">

      <p>
        <input type="Date" id="AllowedDates" name="questionLabel" >
      </p>
      <p>
        <input type="Date" id="AllowedDates1" name="questionLabel">
      </p>
      <p>
        <input type="Date" id="AllowedDates2" name="questionLabel">
      </p>
      <p>
        <input type="Date" id="AllowedDates3" name="questionLabel">
      </p>



      <input type="button" id="addDateButton" value="+" >



  <script>
    document.getElementById('addDateButton').addEventListener('click', function() {
      const container = document.getElementById('allowedDatesContainer');
      document.innerHTML += `
        <input type="date" name="allowedDates">
        <input type="button" onclick="removeDateField(this)" value="-">
      `;
    });

    function removeDateField(button) {
      button.parentElement.remove();
    }

    document.getElementById('settings-form').addEventListener('submit', function(event) {
      event.preventDefault();

      const questionLabel = document.getElementById('questionLabel').value;
      const allowedDates = Array.from(document.getElementsByName('allowedDates')).map(input => input.value);

      // Emit settings to JotForm
      const settings = {
        QuestionLabel: questionLabel,
        AllowedDates: allowedDates.join(',')
      };
      JFCustomWidget.sendMessage(settings);

      alert('Settings saved successfully!');
    });

    // Load settings from JotForm
    JFCustomWidget.subscribe('ready', function() {
      const questionLabel = JFCustomWidget.getWidgetSetting('QuestionLabel');
      const allowedDates = JFCustomWidget.getWidgetSetting('AllowedDates');

      if (questionLabel) {
        document.getElementById('questionLabel').value = questionLabel;
      }
      if (allowedDates) {
        allowedDates.split(',').forEach(date => {
          const container = document.getElementById('allowedDatesContainer');
          const dateField = document.createElement('div');
          dateField.className = 'date-field';
          dateField.innerHTML = `
            <input type="date" name="allowedDates" value="${date}">
            <button type="button" onclick="removeDateField(this)">Remove</button>
          `;
          container.appendChild(dateField);
        });
      }
    });
  </script>


  
</body>
  